# ğŸš¨ ë¸Œë¼ìš°ì € ìë™í™” í•¨ì • ë° í•´ê²° ë°©ë²•

> **ì‹¤ì œ ë°œìƒí•œ ë¬¸ì œì™€ ê²€ì¦ëœ í•´ê²° ë°©ë²•**

## ğŸ“‹ ê°œìš”

ë¸Œë¼ìš°ì € ìë™í™” ì‹œ ë°œìƒí•  ìˆ˜ ìˆëŠ” í•¨ì •ê³¼ ê²€ì¦ëœ í•´ê²° ë°©ë²•ì„ ì •ë¦¬í•œ ê°€ì´ë“œì…ë‹ˆë‹¤.

---

## ğŸš¨ í•¨ì • 1: browser_evaluateì˜ element/ref íŒŒë¼ë¯¸í„° ì‚¬ìš©

### ë¬¸ì œ ìƒí™©

**ì˜ëª»ëœ ì½”ë“œ**:

```javascript
// âŒ ì˜ëª»ëœ ì‚¬ìš© - element/ref íŒŒë¼ë¯¸í„° ì‚¬ìš©
await browser_evaluate((expectedTitle) => {
  const titleElement = document.querySelector('h1[contenteditable="true"]');
  const actualTitle = titleElement?.innerText.trim();
  // ...
}, expectedTitle);
// íŒŒë¼ë¯¸í„°: element="ì œëª© ê²€ì¦", ref="e652"
```

**ê²°ê³¼**:
- ì œëª©ì´ `"README"` â†’ `"[object HTMLDivElement]README"`ë¡œ ë³€ê²½ë¨
- í˜ì´ì§€ URLë„ ë³€ê²½ë¨
- í´ë¦½ë³´ë“œ ë³µì‚¬ ì‹œ element ê°ì²´ê°€ ë¬¸ìì—´ë¡œ ë³€í™˜ë¨

### ì›ì¸

`browser_evaluate`ì˜ `element`ì™€ `ref` íŒŒë¼ë¯¸í„°ëŠ”:
- **í´ë¦­ì´ë‚˜ íƒ€ì´í•‘í•  ìš”ì†Œë¥¼ ì§€ì •**í•˜ëŠ” ìš©ë„
- ìˆœìˆ˜ evaluateì—ì„œëŠ” **ì‚¬ìš©í•˜ë©´ ì•ˆ ë¨**
- í•¨ìˆ˜ ì¸ìë¡œ ì „ë‹¬ ì‹œ ê°ì²´ê°€ `"[object HTMLDivElement]"` ë¬¸ìì—´ë¡œ ë³€í™˜ë¨

### í•´ê²° ë°©ë²•

**âœ… ì˜¬ë°”ë¥¸ ì½”ë“œ**:

```javascript
// âœ… ì˜¬ë°”ë¥¸ ì‚¬ìš© - element/ref íŒŒë¼ë¯¸í„° ì—†ì´ ìˆœìˆ˜ í•¨ìˆ˜ë§Œ
await browser_evaluate(() => {
  const expectedTitle = "README"; // í•¨ìˆ˜ ë‚´ë¶€ì—ì„œ ì§ì ‘ ì •ì˜
  const titleElement = document.querySelector('h1[contenteditable="true"]');
  const actualTitle = titleElement?.innerText.trim();
  
  if (actualTitle !== expectedTitle) {
    return {
      success: false,
      error: "ERR_TITLE_MISMATCH",
      expected: expectedTitle,
      actual: actualTitle
    };
  }
  
  return { success: true, title: actualTitle };
});
```

**í•µì‹¬ ê·œì¹™**:
- `browser_evaluate`ì—ëŠ” **ìˆœìˆ˜ í•¨ìˆ˜ë§Œ** ì „ë‹¬
- í•„ìš”í•œ ê°’ì€ **í•¨ìˆ˜ ë‚´ë¶€ì—ì„œ ì§ì ‘ ì •ì˜** ë˜ëŠ” **ë¬¸ìì—´/ìˆ«ìë¡œë§Œ ì „ë‹¬**
- `element`, `ref` íŒŒë¼ë¯¸í„°ëŠ” **ì ˆëŒ€ ì‚¬ìš©í•˜ì§€ ì•ŠìŒ**

---

## ğŸš¨ í•¨ì • 2: Ctrl+Shift+Pë¡œ í˜ì´ì§€ ì´ë™ ëŒ€í™”ìƒì ì—´ë¦¼

### ë¬¸ì œ ìƒí™©

**ì½”ë“œ**:

```javascript
// Ctrl+Shift+P ì‹œë„
await browser_press_key({ key: "Control+Shift+KeyP" });
```

**ê²°ê³¼**:
- ìƒˆ í˜ì´ì§€ê°€ ìƒì„±ë˜ëŠ” ëŒ€ì‹  "í˜ì´ì§€ ì´ë™" ëŒ€í™”ìƒìê°€ ì—´ë¦¼
- í•˜ìœ„ í˜ì´ì§€ ìƒì„±ì´ ì•ˆ ë¨

### ì›ì¸

- Notion UIê°€ ë³€ê²½ë˜ì–´ ë‹¨ì¶•í‚¤ ë™ì‘ì´ ë‹¬ë¼ì§
- ë˜ëŠ” í˜ì´ì§€ ìƒíƒœì— ë”°ë¼ ë‹¤ë¥¸ ë™ì‘ ìˆ˜í–‰

### í•´ê²° ë°©ë²•

**ë°©ë²• 1: Escapeë¡œ ëŒ€í™”ìƒì ë‹«ê³  UI ë²„íŠ¼ ì‚¬ìš©** (ê²€ì¦ë¨ âœ…)

```javascript
// 1. ëŒ€í™”ìƒìê°€ ì—´ë¦° ê²½ìš° ë‹«ê¸°
await browser_press_key({ key: "Escape" });
await browser_wait_for({ time: 1 });

// 2. JavaScriptë¡œ ë²„íŠ¼ ì§ì ‘ í´ë¦­
const result = await browser_evaluate(() => {
  // "ê¸°íƒ€ ê³µìœ  í˜ì´ì§€" í•­ëª©ì˜ "í•˜ìœ„ í˜ì´ì§€ ì¶”ê°€" ë²„íŠ¼ ì°¾ê¸°
  const treeItems = Array.from(document.querySelectorAll('[role="treeitem"]'));
  const targetItem = treeItems.find(item => item.textContent.includes('ê¸°íƒ€ ê³µìœ  í˜ì´ì§€'));
  
  if (!targetItem) {
    return { success: false, error: "ëŒ€ìƒ í˜ì´ì§€ í•­ëª©ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤" };
  }
  
  // í•˜ìœ„ í˜ì´ì§€ ì¶”ê°€ ë²„íŠ¼ ì°¾ê¸°
  const addPageButton = targetItem.querySelector('[aria-label*="í•˜ìœ„ í˜ì´ì§€ ì¶”ê°€"]');
  
  if (!addPageButton) {
    return { success: false, error: "í•˜ìœ„ í˜ì´ì§€ ì¶”ê°€ ë²„íŠ¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤" };
  }
  
  // ë²„íŠ¼ í´ë¦­
  addPageButton.click();
  
  return { success: true, message: "í•˜ìœ„ í˜ì´ì§€ ì¶”ê°€ ë²„íŠ¼ í´ë¦­ ì™„ë£Œ" };
});

// 3. ëŒ€ê¸°
await browser_wait_for({ time: 2 });
```

---

## ğŸš¨ í•¨ì • 3: ì‚¬ì´ë“œ íŒ¨ë„ì—ì„œ í˜ì´ì§€ê°€ ì—´ë¦¼

### ë¬¸ì œ ìƒí™©

**ì¦ìƒ**:
- í•˜ìœ„ í˜ì´ì§€ ì¶”ê°€ ë²„íŠ¼ í´ë¦­ í›„ ì‚¬ì´ë“œ íŒ¨ë„ì— í˜ì´ì§€ê°€ ì—´ë¦¼
- ë©”ì¸ ì˜ì—­ì´ ì•„ë‹Œ ì‚¬ì´ë“œ íŒ¨ë„ì—ì„œ ì‘ì—…í•´ì•¼ í•¨
- í´ë¦­ì´ ì°¨ë‹¨ë  ìˆ˜ ìˆìŒ

### í•´ê²° ë°©ë²•

**âœ… ìƒˆ í˜ì´ì§€ URLë¡œ ì§ì ‘ navigate** (ê°€ì¥ ì•ˆì •ì )

```javascript
// 1. í˜ì´ì§€ ìƒì„± í™•ì¸
const pageCreated = await browser_evaluate(() => {
  // ì‚¬ì´ë“œë°”ì—ì„œ "ìƒˆ í˜ì´ì§€" ë˜ëŠ” ìƒì„±ëœ í˜ì´ì§€ í™•ì¸
  const newPageItem = Array.from(document.querySelectorAll('[role="treeitem"]'))
    .find(item => item.textContent.includes('ìƒˆ í˜ì´ì§€') || item.textContent.includes('README'));
  
  if (!newPageItem) {
    return { success: false, error: "í˜ì´ì§€ê°€ ìƒì„±ë˜ì§€ ì•ŠìŒ" };
  }
  
  return { success: true };
});

// 2. í˜„ì¬ URL í™•ì¸ (íŒŒë¼ë¯¸í„°ì—ì„œ í˜ì´ì§€ ID ì¶”ì¶œ)
const currentUrlResult = await browser_evaluate(() => {
  const url = window.location.href;
  const match = url.match(/\?p=([a-f0-9]+)/);
  
  if (!match) {
    return { success: false, error: "í˜ì´ì§€ IDë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤" };
  }
  
  return { 
    success: true, 
    pageId: match[1],
    fullUrl: url
  };
});

// 3. ìƒˆ í˜ì´ì§€ URLë¡œ ì§ì ‘ navigate
const newPageUrl = `https://www.notion.so/README-${currentUrlResult.pageId}`;
await browser_navigate({ url: newPageUrl });
await browser_wait_for({ time: 2 });
```

---

## ğŸš¨ í•¨ì • 4: ì œëª© ë³µêµ¬ í•„ìš”

### ë¬¸ì œ ìƒí™©

**ì¦ìƒ**:
- ì œëª©ì´ `"[object HTMLDivElement]README"`ë¡œ ì˜¤ì—¼ë¨
- ë˜ëŠ” ë‹¤ë¥¸ ì´ìœ ë¡œ ì œëª©ì´ ë³€ê²½ë¨

### í•´ê²° ë°©ë²•

**âœ… ì œëª© ì˜ì—­ ì§ì ‘ ìˆ˜ì •**:

```javascript
// ì œëª© ë³µêµ¬
const titleFixed = await browser_evaluate(() => {
  const titleElement = document.querySelector('h1[contenteditable="true"]');
  
  if (!titleElement) {
    return { success: false, error: "ì œëª© ì˜ì—­ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤" };
  }
  
  // ì œëª© ì˜ì—­ì— í¬ì»¤ìŠ¤
  titleElement.focus();
  titleElement.click();
  
  // ê¸°ì¡´ í…ìŠ¤íŠ¸ ì „ì²´ ì„ íƒ
  const range = document.createRange();
  range.selectNodeContents(titleElement);
  const selection = window.getSelection();
  selection.removeAllRanges();
  selection.addRange(range);
  
  // "README" ì…ë ¥ (ì˜¬ë°”ë¥¸ ì œëª©ìœ¼ë¡œ ë®ì–´ì“°ê¸°)
  document.execCommand('insertText', false, 'README');
  
  return { 
    success: true, 
    message: "ì œëª© ë³µêµ¬ ì™„ë£Œ",
    currentTitle: titleElement.innerText.trim()
  };
});

// ê²€ì¦
if (!titleFixed.success) {
  throw new Error("ì œëª© ë³µêµ¬ ì‹¤íŒ¨");
}
```

---

## ğŸš¨ í•¨ì • 5: í´ë¦½ë³´ë“œ ë³µì‚¬ ì‹œ ì˜ëª»ëœ íŒŒë¼ë¯¸í„° ì „ë‹¬

### ë¬¸ì œ ìƒí™©

**ì˜ëª»ëœ ì½”ë“œ**:

```javascript
// âŒ element íŒŒë¼ë¯¸í„° ì‚¬ìš©
await browser_evaluate((content) => {
  return navigator.clipboard.writeText(content);
}, element="í´ë¦½ë³´ë“œ ë³µì‚¬", ref="e642");
// contentê°€ element ê°ì²´ë¡œ ì „ë‹¬ë¨!
```

### í•´ê²° ë°©ë²•

**âœ… ì˜¬ë°”ë¥¸ ì½”ë“œ - ë‚´ìš©ì„ í•¨ìˆ˜ ë‚´ë¶€ì— ì§ì ‘ í¬í•¨**:

```javascript
// âœ… ë°©ë²• 1: ë¬¸ìì—´ì„ ì§ì ‘ í•¨ìˆ˜ ë‚´ë¶€ì— í¬í•¨
await browser_evaluate(() => {
  const content = `íŒŒì¼ ë‚´ìš©...`;
  return navigator.clipboard.writeText(content).then(() => {
    return { success: true };
  });
});

// âœ… ë°©ë²• 2: browser_run_code ì‚¬ìš©
await browser_run_code({
  code: `async (page) => {
    const content = \`íŒŒì¼ ë‚´ìš©...\`;
    await page.evaluate((text) => {
      return navigator.clipboard.writeText(text);
    }, content);
    return { success: true };
  }`
});
```

---

## âœ… ê²€ì¦ëœ ì „ì²´ ì›Œí¬í”Œë¡œìš°

### ì„±ê³µí•œ ì—…ë¡œë“œ í”„ë¡œì„¸ìŠ¤

```javascript
// 1. ë¶€ëª¨ í˜ì´ì§€ ì ‘ì†
await browser_navigate({ url: parentPageUrl });
await browser_wait_for({ time: 2 });

// 2. í¸ì§‘ ê¶Œí•œ í™•ì¸
const permissionCheck = await browser_evaluate(() => {
  const editableAreas = document.querySelectorAll('[contenteditable="true"]');
  const addPageButton = document.querySelector('[aria-label*="í•˜ìœ„ í˜ì´ì§€ ì¶”ê°€"]');
  const hasPermission = editableAreas.length > 0 && !!addPageButton;
  
  return {
    success: hasPermission,
    hasEditPermission: hasPermission,
    editableAreasCount: editableAreas.length,
    hasAddPageButton: !!addPageButton
  };
});

if (!permissionCheck.success) {
  throw new Error("ERR_BROWSER_NO_EDIT_PERMISSION");
}

// 3. í•˜ìœ„ í˜ì´ì§€ ìƒì„± (JavaScript ì§ì ‘ í´ë¦­)
const createResult = await browser_evaluate(() => {
  const treeItems = Array.from(document.querySelectorAll('[role="treeitem"]'));
  const targetItem = treeItems.find(item => item.textContent.includes('ë¶€ëª¨ í˜ì´ì§€ ì œëª©'));
  
  if (!targetItem) {
    return { success: false, error: "ëŒ€ìƒ í˜ì´ì§€ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤" };
  }
  
  const addPageButton = targetItem.querySelector('[aria-label*="í•˜ìœ„ í˜ì´ì§€ ì¶”ê°€"]');
  if (!addPageButton) {
    return { success: false, error: "ë²„íŠ¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤" };
  }
  
  addPageButton.click();
  return { success: true };
});

await browser_wait_for({ time: 2 });

// 4. ìƒˆ í˜ì´ì§€ ID í™•ì¸ ë° navigate
const pageIdResult = await browser_evaluate(() => {
  const url = window.location.href;
  const match = url.match(/\?p=([a-f0-9]+)/);
  
  if (!match) {
    return { success: false, error: "í˜ì´ì§€ IDë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤" };
  }
  
  return { success: true, pageId: match[1] };
});

if (!pageIdResult.success) {
  throw new Error("í˜ì´ì§€ ìƒì„± ì‹¤íŒ¨");
}

// 5. ìƒˆ í˜ì´ì§€ URLë¡œ ì´ë™
const newPageUrl = `https://www.notion.so/README-${pageIdResult.pageId}`;
await browser_navigate({ url: newPageUrl });
await browser_wait_for({ time: 2 });

// 6. ì œëª© ì…ë ¥ (ìˆœìˆ˜ evaluateë§Œ ì‚¬ìš©)
await browser_type({ 
  element: "ì œëª© ì˜ì—­ (h1)", 
  ref: "eXXX",  // snapshotì—ì„œ í™•ì¸í•œ ref
  text: "README" 
});
await browser_wait_for({ time: 1 });

// 7. ì œëª© ê²€ì¦ (ìˆœìˆ˜ í•¨ìˆ˜)
const titleCheck = await browser_evaluate(() => {
  const expectedTitle = "README";
  const titleElement = document.querySelector('h1[contenteditable="true"]');
  const actualTitle = titleElement?.innerText.trim();
  
  return {
    success: actualTitle === expectedTitle,
    expected: expectedTitle,
    actual: actualTitle
  };
});

// 8. ì œëª©ì´ ì˜¤ì—¼ëœ ê²½ìš° ë³µêµ¬
if (!titleCheck.success) {
  await browser_evaluate(() => {
    const titleElement = document.querySelector('h1[contenteditable="true"]');
    titleElement.focus();
    titleElement.click();
    
    const range = document.createRange();
    range.selectNodeContents(titleElement);
    const selection = window.getSelection();
    selection.removeAllRanges();
    selection.addRange(range);
    
    document.execCommand('insertText', false, 'README');
    
    return { success: true };
  });
  
  await browser_wait_for({ time: 1 });
}

// 9. ë‚´ìš© ì˜ì—­ìœ¼ë¡œ ì´ë™
await browser_evaluate(() => {
  const contentArea = document.querySelector('[contenteditable="true"]:not(h1)');
  if (!contentArea) {
    return { success: false };
  }
  
  contentArea.focus();
  contentArea.click();
  
  const range = document.createRange();
  range.selectNodeContents(contentArea);
  range.collapse(false);
  const selection = window.getSelection();
  selection.removeAllRanges();
  selection.addRange(range);
  
  return { success: true };
});

// 10. ë‚´ìš© ì—…ë¡œë“œ (browser_run_code ì‚¬ìš©)
await browser_run_code({
  code: `async (page) => {
    const fileContent = \`íŒŒì¼ ì „ì²´ ë‚´ìš©...\`;
    
    // í´ë¦½ë³´ë“œì— ë³µì‚¬
    await page.evaluate((text) => {
      return navigator.clipboard.writeText(text);
    }, fileContent);
    
    // ë¶™ì—¬ë„£ê¸°
    await page.keyboard.press('Control+KeyV');
    
    // ëŒ€ê¸°
    await page.waitForTimeout(5000);
    
    return { success: true };
  }`
});

// 11. ìµœì¢… ê²€ì¦
const finalCheck = await browser_evaluate(() => {
  const lastLine = "Universal Notion Agent v2.1.1";
  const pageText = document.body.innerText;
  const hasLastLine = pageText.includes(lastLine);
  
  const titleElement = document.querySelector('h1[contenteditable="true"]');
  const titleCorrect = titleElement?.innerText.trim() === "README";
  
  return {
    success: hasLastLine && titleCorrect,
    hasLastLine: hasLastLine,
    titleCorrect: titleCorrect,
    pageUrl: window.location.href
  };
});
```

---

## ğŸ“‹ ì²´í¬ë¦¬ìŠ¤íŠ¸: ì•ˆì „í•œ ë¸Œë¼ìš°ì € ìë™í™”

### í•¨ìˆ˜ ì‚¬ìš© ê·œì¹™

- [ ] **browser_evaluate**: ìˆœìˆ˜ í•¨ìˆ˜ë§Œ ì „ë‹¬, element/ref íŒŒë¼ë¯¸í„° **ì ˆëŒ€ ì‚¬ìš© ê¸ˆì§€**
- [ ] **browser_type**: element/ref íŒŒë¼ë¯¸í„° ì‚¬ìš© ê°€ëŠ¥ (íƒ€ì´í•‘í•  ìš”ì†Œ ì§€ì •)
- [ ] **browser_click**: element/ref íŒŒë¼ë¯¸í„° ì‚¬ìš© (í´ë¦­í•  ìš”ì†Œ ì§€ì •)
- [ ] **browser_run_code**: ë³µì¡í•œ ë¡œì§ ë˜ëŠ” íŒŒì¼ ë‚´ìš© ì „ë‹¬ ì‹œ ì‚¬ìš©

### ê°’ ì „ë‹¬ ë°©ë²•

- [ ] **ë¬¸ìì—´/ìˆ«ì**: í•¨ìˆ˜ ë‚´ë¶€ì— ì§ì ‘ ì •ì˜ (ê¶Œì¥)
- [ ] **ëŒ€ìš©ëŸ‰ í…ìŠ¤íŠ¸**: `browser_run_code` ì‚¬ìš©
- [ ] **ê°ì²´**: ì ˆëŒ€ ì „ë‹¬í•˜ì§€ ì•ŠìŒ

### í˜ì´ì§€ ìƒì„± í”„ë¡œì„¸ìŠ¤

- [ ] 1. ë¶€ëª¨ í˜ì´ì§€ ì ‘ì† ë° í¸ì§‘ ê¶Œí•œ í™•ì¸
- [ ] 2. JavaScriptë¡œ "í•˜ìœ„ í˜ì´ì§€ ì¶”ê°€" ë²„íŠ¼ ì§ì ‘ í´ë¦­
- [ ] 3. ëŒ€í™”ìƒìê°€ ì—´ë¦¬ë©´ Escapeë¡œ ë‹«ê¸°
- [ ] 4. í˜ì´ì§€ ìƒì„± ì„±ê³µ í™•ì¸ (ì‚¬ì´ë“œë°”ì— ìƒˆ í•­ëª©)
- [ ] 5. URL íŒŒë¼ë¯¸í„°ì—ì„œ í˜ì´ì§€ ID ì¶”ì¶œ
- [ ] 6. ìƒˆ í˜ì´ì§€ URLë¡œ ì§ì ‘ navigate
- [ ] 7. ì œëª© ì…ë ¥ ë° ê²€ì¦
- [ ] 8. ì œëª© ì˜¤ì—¼ ì‹œ ì¦‰ì‹œ ë³µêµ¬
- [ ] 9. ë‚´ìš© ì˜ì—­ìœ¼ë¡œ ì´ë™
- [ ] 10. ë‚´ìš© ì—…ë¡œë“œ
- [ ] 11. ìµœì¢… ê²€ì¦

### ì œëª© ë³´í˜¸

- [ ] ì œëª© ì…ë ¥ í›„ **ì¦‰ì‹œ ê²€ì¦** (ìˆœìˆ˜ evaluate ì‚¬ìš©)
- [ ] ì˜¤ì—¼ ê°ì§€ ì‹œ **ì¦‰ì‹œ ë³µêµ¬** (ì „ì²´ ì„ íƒ + insertText)
- [ ] ë‚´ìš© ì—…ë¡œë“œ ì „/í›„ **ì œëª© ì¬í™•ì¸**

### ì—ëŸ¬ ë³µêµ¬

- [ ] ëŒ€í™”ìƒì ê°ì§€ ì‹œ Escapeë¡œ ë‹«ê¸°
- [ ] í´ë¦­ ì°¨ë‹¨ ì‹œ JavaScriptë¡œ ì§ì ‘ í´ë¦­
- [ ] ì‚¬ì´ë“œ íŒ¨ë„ ë¬¸ì œ ì‹œ ì§ì ‘ navigate
- [ ] ì œëª© ì˜¤ì—¼ ì‹œ ì¦‰ì‹œ ë³µêµ¬

---

## ğŸ’¡ í•µì‹¬ êµí›ˆ

### 1. browser_evaluateëŠ” ìˆœìˆ˜ í•¨ìˆ˜ë§Œ

```javascript
// âŒ ì˜ëª»ëœ ì‚¬ìš©
await browser_evaluate((param) => { ... }, element="...", ref="...");

// âœ… ì˜¬ë°”ë¥¸ ì‚¬ìš©
await browser_evaluate(() => {
  const param = "ê°’"; // ë‚´ë¶€ì—ì„œ ì •ì˜
  // ...
});
```

### 2. ëŒ€ìš©ëŸ‰ í…ìŠ¤íŠ¸ëŠ” browser_run_code

```javascript
// âœ… íŒŒì¼ ë‚´ìš© ì „ë‹¬
await browser_run_code({
  code: `async (page) => {
    const content = \`ì „ì²´ íŒŒì¼ ë‚´ìš©...\`;
    await page.evaluate((text) => {
      return navigator.clipboard.writeText(text);
    }, content);
  }`
});
```

### 3. í˜ì´ì§€ ìƒì„± í›„ ì§ì ‘ navigate

```javascript
// âœ… ì‚¬ì´ë“œ íŒ¨ë„ ë¬¸ì œ íšŒí”¼
const pageId = "ì¶”ì¶œí•œ_í˜ì´ì§€_ID";
await browser_navigate({ url: `https://www.notion.so/ì œëª©-${pageId}` });
```

### 4. ì œëª© ì˜¤ì—¼ ì‹œ ì¦‰ì‹œ ë³µêµ¬

```javascript
// âœ… ì œëª© ê²€ì¦ â†’ ì˜¤ì—¼ ê°ì§€ â†’ ì¦‰ì‹œ ë³µêµ¬
if (titleCheck.actual.includes('[object')) {
  // ì „ì²´ ì„ íƒ í›„ ì˜¬ë°”ë¥¸ ì œëª©ìœ¼ë¡œ ë®ì–´ì“°ê¸°
  document.execCommand('insertText', false, 'ì˜¬ë°”ë¥¸ì œëª©');
}
```

---

## ğŸ“ ìˆ˜ì •ëœ ê°€ì´ë“œ ì ìš© ì˜ˆì‹œ

### ê¸°ì¡´ ê°€ì´ë“œ ì—…ë°ì´íŠ¸ í•„ìš” ì‚¬í•­

**`01_ì‹¤í–‰_ê°€ì´ë“œ.md` ìˆ˜ì • í•„ìš”**:

1. **browser_evaluate ì‚¬ìš© ì‹œ ì£¼ì˜ì‚¬í•­ ì¶”ê°€**:
   - element/ref íŒŒë¼ë¯¸í„° ì‚¬ìš© ê¸ˆì§€
   - ìˆœìˆ˜ í•¨ìˆ˜ë§Œ ì „ë‹¬

2. **í˜ì´ì§€ ìƒì„± í”„ë¡œì„¸ìŠ¤ ìˆ˜ì •**:
   - JavaScript ì§ì ‘ í´ë¦­ ë°©ì‹ ì¶”ê°€
   - ì‚¬ì´ë“œ íŒ¨ë„ ë¬¸ì œ í•´ê²° ë°©ë²• ì¶”ê°€
   - ì§ì ‘ navigate ë°©ì‹ ì¶”ê°€

3. **ì œëª© ë³µêµ¬ ì ˆì°¨ ì¶”ê°€**:
   - ì˜¤ì—¼ ê°ì§€ ë°©ë²•
   - ë³µêµ¬ ì½”ë“œ íŒ¨í„´

**`02_ì½”ë“œ_íŒ¨í„´.md` ìˆ˜ì • í•„ìš”**:

1. **browser_evaluate ì˜¬ë°”ë¥¸ ì‚¬ìš©ë²• ì¶”ê°€**
2. **browser_run_code ì‚¬ìš© ì˜ˆì‹œ ì¶”ê°€**
3. **ì œëª© ë³µêµ¬ í•¨ìˆ˜ íŒ¨í„´ ì¶”ê°€**

---

## ğŸ¯ ì™„ì „í•œ ì˜ˆì‹œ: ë¬¸ì œ ì—†ëŠ” ì—…ë¡œë“œ

```javascript
// ì™„ì „í•œ ì—…ë¡œë“œ í”„ë¡œì„¸ìŠ¤ (ê²€ì¦ë¨)
async function uploadToNotion(parentPageUrl, fileName, fileContent) {
  // 1. ë¶€ëª¨ í˜ì´ì§€ ì ‘ì†
  await browser_navigate({ url: parentPageUrl });
  await browser_wait_for({ time: 2 });
  
  // 2. í¸ì§‘ ê¶Œí•œ í™•ì¸
  const permission = await browser_evaluate(() => {
    const editableAreas = document.querySelectorAll('[contenteditable="true"]');
    const addPageButton = document.querySelector('[aria-label*="í•˜ìœ„ í˜ì´ì§€ ì¶”ê°€"]');
    return {
      success: editableAreas.length > 0 && !!addPageButton,
      hasEditPermission: editableAreas.length > 0 && !!addPageButton
    };
  });
  
  if (!permission.success) {
    throw new Error("ERR_BROWSER_NO_EDIT_PERMISSION");
  }
  
  // 3. JavaScriptë¡œ ë²„íŠ¼ ì§ì ‘ í´ë¦­
  const clicked = await browser_evaluate(() => {
    const treeItems = Array.from(document.querySelectorAll('[role="treeitem"]'));
    const targetItem = treeItems.find(item => item.textContent.includes('ë¶€ëª¨í˜ì´ì§€ì œëª©'));
    if (!targetItem) return { success: false };
    
    const btn = targetItem.querySelector('[aria-label*="í•˜ìœ„ í˜ì´ì§€ ì¶”ê°€"]');
    if (!btn) return { success: false };
    
    btn.click();
    return { success: true };
  });
  
  await browser_wait_for({ time: 2 });
  
  // 4. í˜ì´ì§€ ID ì¶”ì¶œ
  const pageIdResult = await browser_evaluate(() => {
    const match = window.location.href.match(/\?p=([a-f0-9]+)/);
    return match ? { success: true, pageId: match[1] } : { success: false };
  });
  
  // 5. ìƒˆ í˜ì´ì§€ë¡œ navigate
  const pageTitle = fileName.replace('.md', '').replace(/_/g, ' ').trim();
  await browser_navigate({ 
    url: `https://www.notion.so/${pageTitle}-${pageIdResult.pageId}` 
  });
  await browser_wait_for({ time: 2 });
  
  // 6. ì œëª© ì…ë ¥ (snapshotì—ì„œ ref í™•ì¸ í›„)
  await browser_type({ 
    element: "ì œëª© ì˜ì—­ (h1)", 
    ref: "í™•ì¸í•œ_ref",
    text: pageTitle 
  });
  await browser_wait_for({ time: 1 });
  
  // 7. ì œëª© ê²€ì¦ ë° ë³µêµ¬
  const titleOk = await browser_evaluate(() => {
    const expected = "README"; // ì‹¤ì œ ì œëª©ìœ¼ë¡œ ë³€ê²½
    const actual = document.querySelector('h1[contenteditable="true"]')?.innerText.trim();
    
    if (actual !== expected && actual) {
      // ë³µêµ¬
      const titleElement = document.querySelector('h1[contenteditable="true"]');
      titleElement.focus();
      const range = document.createRange();
      range.selectNodeContents(titleElement);
      const selection = window.getSelection();
      selection.removeAllRanges();
      selection.addRange(range);
      document.execCommand('insertText', false, expected);
    }
    
    const finalTitle = document.querySelector('h1[contenteditable="true"]')?.innerText.trim();
    return { success: finalTitle === expected, title: finalTitle };
  });
  
  // 8. ë‚´ìš© ì˜ì—­ìœ¼ë¡œ ì´ë™
  await browser_evaluate(() => {
    const contentArea = document.querySelector('[contenteditable="true"]:not(h1)');
    contentArea.focus();
    contentArea.click();
    const range = document.createRange();
    range.selectNodeContents(contentArea);
    range.collapse(false);
    const selection = window.getSelection();
    selection.removeAllRanges();
    selection.addRange(range);
    return { success: true };
  });
  
  // 9. ë‚´ìš© ì—…ë¡œë“œ
  await browser_run_code({
    code: `async (page) => {
      const content = \`${fileContent.replace(/`/g, '\\`')}\`;
      
      await page.evaluate((text) => {
        return navigator.clipboard.writeText(text);
      }, content);
      
      await page.keyboard.press('Control+KeyV');
      await page.waitForTimeout(5000);
      
      return { success: true };
    }`
  });
  
  // 10. ìµœì¢… ê²€ì¦
  const finalCheck = await browser_evaluate(() => {
    const lastLine = "ë§ˆì§€ë§‰ ì¤„ í…ìŠ¤íŠ¸";
    const pageText = document.body.innerText;
    const titleElement = document.querySelector('h1[contenteditable="true"]');
    
    return {
      success: pageText.includes(lastLine) && titleElement?.innerText.trim() === "README",
      pageUrl: window.location.href
    };
  });
  
  return finalCheck.pageUrl;
}
```

---

## ğŸš¨ ì ˆëŒ€ ê·œì¹™

### 1. browser_evaluate ì‚¬ìš© ì‹œ

```javascript
// âŒ ì ˆëŒ€ í•˜ì§€ ë§ˆì„¸ìš”
await browser_evaluate((param) => { ... }, param, element="...", ref="...");

// âœ… ë°˜ë“œì‹œ ì´ë ‡ê²Œ
await browser_evaluate(() => {
  const param = "ê°’"; // ë‚´ë¶€ ì •ì˜
  // ...
});
```

### 2. íŒŒì¼ ë‚´ìš© ì „ë‹¬ ì‹œ

```javascript
// âŒ evaluateë¡œ ì „ë‹¬í•˜ì§€ ë§ˆì„¸ìš”
await browser_evaluate((content) => { ... }, fileContent);

// âœ… browser_run_code ì‚¬ìš©
await browser_run_code({
  code: `async (page) => {
    const content = \`${fileContent}\`;
    // ...
  }`
});
```

### 3. ì œëª© ì…ë ¥ í›„

```javascript
// âœ… ë°˜ë“œì‹œ ê²€ì¦
const check = await browser_evaluate(() => {
  const actual = document.querySelector('h1')?.innerText.trim();
  const expected = "ì›í•˜ëŠ”ì œëª©";
  return { success: actual === expected, actual: actual };
});

// âœ… ì˜¤ì—¼ ì‹œ ì¦‰ì‹œ ë³µêµ¬
if (!check.success) {
  // ë³µêµ¬ ì½”ë“œ...
}
```

---

## ğŸ“š ì°¸ì¡°

- **ë©”ì¸ ê°€ì´ë“œ**: `00_ë©”ì¸_ê°€ì´ë“œ.md`
- **ì‹¤í–‰ ê°€ì´ë“œ**: `01_ì‹¤í–‰_ê°€ì´ë“œ.md`
- **ì½”ë“œ íŒ¨í„´**: `02_ì½”ë“œ_íŒ¨í„´.md`
- **ì—ëŸ¬ ì²˜ë¦¬**: `03_ì—ëŸ¬_ì²˜ë¦¬.md`

---

---

## ğŸ“ ì¶œì²˜

**ì‘ì„±ì**: ê¹€ì¤€ëª¨  
**ì´ë©”ì¼**: rnsdlsdmtlk@gmail.com  
**ì‘ì„± ë‚ ì§œ**: 2026-01-13  
**ê¸°ë°˜**: ì‹¤ì œ ì„±ê³µí•œ ì—…ë¡œë“œ í”„ë¡œì„¸ìŠ¤ (README.md â†’ Notion ì—…ë¡œë“œ ì„±ê³µ)  
**ë²„ì „**: 1.0.0

---

**Made with â¤ï¸ for Universal Notion Agent**
